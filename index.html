<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Vim-CLPUM by h-east</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Vim-CLPUM</h1>
      <h2 class="project-tagline">CLPUM (Command-Line mode PopUp Menu) for Vim</h2>
      <a href="https://github.com/h-east/vim/tree/clpum" class="btn">View on GitHub</a>
    </section>

    <section class="main-content">
      <p>(Since 2015-12-07)<br>
Update: 2016-05-15<br>
The 'wildmode' option value name <code>clpum</code> change to <code>popup</code>.<br>
Remove 'clcompleteopt' options value <code>longest</code>.</p>

<h3>
<a id="what-is-vim-clpum" class="anchor" href="#what-is-vim-clpum" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What is Vim-CLPUM?</h3>

<p>vim-CLPUM is implementation of Command-Line mode PopUp Menu for Vim.<br>
Modified Vim's C source code.  </p>

<p><img src="https://github.com/h-east/vim/wiki/images/clpum1.png" alt="clpum1"></p>

<p><img src="https://github.com/h-east/vim/wiki/images/clpumDemo02.gif" alt="clpum1"></p>

<p><img src="https://github.com/h-east/vim/wiki/images/clpum2.png" alt="clpum2"></p>

<hr>

<h3>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to Use</h3>

<ul>
<li>Add the following sample code to your <code>.vimrc</code>.</li>
</ul>

<div class="highlight highlight-source-viml"><pre><span class="pl-k">if</span> <span class="pl-c1">has</span>(<span class="pl-s">'clpum'</span>)
    <span class="pl-c1">set</span> wildmode=popup
    <span class="pl-c1">set</span> wildmenu
    <span class="pl-c1">set</span> clpumheight=<span class="pl-c1">40</span>
    <span class="pl-c1">set</span> clcompletefunc=UserDefinedClComplete
    <span class="pl-k">function</span>! <span class="pl-en">UserDefinedClComplete</span>(findstart, base)
        <span class="pl-k">if</span> <span class="pl-smi">a:findstart</span>
            <span class="pl-k">return</span> <span class="pl-c1">getcmdpos</span>()
        <span class="pl-k">else</span>
            <span class="pl-k">return</span> [
            <span class="pl-k">\</span>   { <span class="pl-s">'word'</span>: <span class="pl-s">'Jan'</span>, <span class="pl-s">'menu'</span>: <span class="pl-s">'January'</span> },
            <span class="pl-k">\</span>   { <span class="pl-s">'word'</span>: <span class="pl-s">'Feb'</span>, <span class="pl-s">'menu'</span>: <span class="pl-s">'February'</span> },
            <span class="pl-k">\</span>   { <span class="pl-s">'word'</span>: <span class="pl-s">'Mar'</span>, <span class="pl-s">'menu'</span>: <span class="pl-s">'March'</span> },
            <span class="pl-k">\</span>   { <span class="pl-s">'word'</span>: <span class="pl-s">'Apr'</span>, <span class="pl-s">'menu'</span>: <span class="pl-s">'April'</span> },
            <span class="pl-k">\</span>   { <span class="pl-s">'word'</span>: <span class="pl-s">'May'</span>, <span class="pl-s">'menu'</span>: <span class="pl-s">'May'</span> },
            <span class="pl-k">\</span> ]
        <span class="pl-k">endif</span>
    endfunc
<span class="pl-k">endif</span></pre></div>

<ul>
<li>Run patched Vim.</li>
<li>Type &lt;Tab&gt; in command-line mode.  (&lt;Tab&gt; has been set by 'wildchar' option)<br>
CLPUM activate by pressing the &lt;Tab&gt; in command-line mode. (When 'wildmode' option include 'popup', and 'wildmenu' is on)</li>
</ul>

<p>example:  </p>

<div class="highlight highlight-source-viml"><pre>:<span class="pl-c1">set</span> <span class="pl-c1">&lt;Tab&gt;</span>
:<span class="pl-c1">colorscheme</span> <span class="pl-c1">&lt;Tab&gt;</span>
:<span class="pl-c1">set</span> wild<span class="pl-c1">&lt;Tab&gt;</span>
:h time<span class="pl-c1">&lt;Tab&gt;</span></pre></div>

<p>NOTE:</p>

<ul>
<li>Key operation during the CLPUM basically conforms to the following contents of help.<br>
<code>:h popupmenu-completion</code><br>
<code>:h popupmenu-keys</code>
</li>
<li>Content to be complemented is the same as the command-line completion of the insert mode.<br>
<code>:h compl-vim</code>
</li>
<li>When 'cmdheight'-option is 2 or more, messages are displayed on the last line.</li>
<li>If you want to use user defined completion in command-line mode, press &lt;C-X&gt;.<br>
(Need to set the 'clcompletefunc' options.)</li>
</ul>

<hr>

<h3>
<a id="addedchanged-options-event-and-etc" class="anchor" href="#addedchanged-options-event-and-etc" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Added/Changed Options, Event and etc.</h3>

<p><strong>Option:</strong> 'wildmenu', 'clcompletefunc', 'clcompleteopt', 'clpumheight'<br>
<strong>Built-in Function:</strong> clpumvisible()<br>
<strong>Event:</strong> ClCompleteDone<br>
<strong>Predefined Vim variables:</strong> v:clcompleted_item<br>
<strong>Highlight groups:</strong> ClPmenu, ClPmenuSel, ClPmenuSbar, ClPmenuThumb  </p>

<hr>

<h3>
<a id="progress" class="anchor" href="#progress" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Progress</h3>

<table>
<thead>
<tr>
<th>Phase</th>
<th>%</th>
</tr>
</thead>
<tbody>
<tr>
<td>Implement</td>
<td>100</td>
</tr>
<tr>
<td>Debug and refactor</td>
<td>70</td>
</tr>
<tr>
<td>Write documents</td>
<td>5</td>
</tr>
<tr>
<td>Write tests</td>
<td>0</td>
</tr>
<tr>
<td>Send patch</td>
<td>-</td>
</tr>
<tr>
<td>Included this patch to Vim</td>
<td>-</td>
</tr>
</tbody>
</table>

<hr>

<h3>
<a id="goal" class="anchor" href="#goal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Goal</h3>

<p>Want to be included this patch to Vim.</p>

<h3>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h3>

<p>Follow the <a href="https://github.com/vim/vim/blob/master/README.md#copying">Vim license</a>.</p>

<h3>
<a id="author" class="anchor" href="#author" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Author</h3>

<p>h_east (<a href="https://github.com/h-east" class="user-mention">@h-east</a>)<br>
<a href="https://groups.google.com/forum/#!searchin/vim_dev/hirohito-higashi%7Csort:date">Search me in vim_dev</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/h-east/vim">Vim-CLPUM</a> is maintained by <a href="https://github.com/h-east">h-east</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-6869027-4");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
